---
import PostCard from "../../components/PostCard.astro";
import Pagination from "../../components/Pagination.astro";
import SiteLayout from "../../layouts/SiteLayout.astro";

export async function getStaticPaths({ paginate }) {
  const allPosts = await Astro.glob("../posts/*.md");
  return paginate(allPosts, { pageSize: 6 });
}

const { page } = Astro.props;
---

<SiteLayout title="My Blog">
  <section
    class="container mx-auto px-4 pt-20 pb-6 lg:px-24"
    aria-label="New Blog Posts"
  >
    <h1 class="text-4xl font-extrabold">Blog</h1>
    <div class="my-8 grid gap-x-8 gap-y-12 md:grid-cols-2 xl:grid-cols-3">
      {
        page.data.map((post) => (
          <PostCard frontmatter={post.frontmatter} url={post.url} />
        ))
      }
    </div>
    <Pagination prevUrl={page.url.prev} nextUrl={page.url.next} />
  </section>
</SiteLayout>
